<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>Android API | DHAP</title>
    <meta name="description" content="Decentralised Home Automation Protocol Documentation">
    
    
    <link rel="preload" href="/DHAP-Documentation/assets/css/0.styles.5604310b.css" as="style"><link rel="preload" href="/DHAP-Documentation/assets/js/app.ee0d968a.js" as="script"><link rel="preload" href="/DHAP-Documentation/assets/js/2.c97535ac.js" as="script"><link rel="preload" href="/DHAP-Documentation/assets/js/10.b1db677c.js" as="script"><link rel="prefetch" href="/DHAP-Documentation/assets/js/11.3c9e5aad.js"><link rel="prefetch" href="/DHAP-Documentation/assets/js/12.834af0f2.js"><link rel="prefetch" href="/DHAP-Documentation/assets/js/13.54851ada.js"><link rel="prefetch" href="/DHAP-Documentation/assets/js/14.645edb52.js"><link rel="prefetch" href="/DHAP-Documentation/assets/js/15.e3f71b71.js"><link rel="prefetch" href="/DHAP-Documentation/assets/js/16.996da96d.js"><link rel="prefetch" href="/DHAP-Documentation/assets/js/17.6d0813f1.js"><link rel="prefetch" href="/DHAP-Documentation/assets/js/3.a35a8884.js"><link rel="prefetch" href="/DHAP-Documentation/assets/js/4.3d1a62e5.js"><link rel="prefetch" href="/DHAP-Documentation/assets/js/5.5d5e6d2b.js"><link rel="prefetch" href="/DHAP-Documentation/assets/js/6.5d05364a.js"><link rel="prefetch" href="/DHAP-Documentation/assets/js/7.fb09b9af.js"><link rel="prefetch" href="/DHAP-Documentation/assets/js/8.2fb19c78.js"><link rel="prefetch" href="/DHAP-Documentation/assets/js/9.cf65704a.js">
    <link rel="stylesheet" href="/DHAP-Documentation/assets/css/0.styles.5604310b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/DHAP-Documentation/" class="home-link router-link-active"><!----> <span class="site-name">DHAP</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Home</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/DHAP-Documentation/" class="sidebar-link">Introduction</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Guide</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/DHAP-Documentation/guide/" class="sidebar-link">Quick Library Installation</a></li><li><a href="/DHAP-Documentation/guide/android.html" class="sidebar-link">Android Library</a></li><li><a href="/DHAP-Documentation/guide/ios.html" class="sidebar-link">iOS Library</a></li><li><a href="/DHAP-Documentation/guide/desktop.html" class="sidebar-link">Desktop Application</a></li><li><a href="/DHAP-Documentation/guide/esp8266.html" class="sidebar-link">ESP8266 Device</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>API</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/DHAP-Documentation/api/" class="active sidebar-link">Android API</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/DHAP-Documentation/api/#dhap-instance" class="sidebar-link">DHAP Instance</a></li><li class="sidebar-sub-header"><a href="/DHAP-Documentation/api/#discovery" class="sidebar-link">Discovery</a></li><li class="sidebar-sub-header"><a href="/DHAP-Documentation/api/#joining" class="sidebar-link">Joining</a></li><li class="sidebar-sub-header"><a href="/DHAP-Documentation/api/#display" class="sidebar-link">Display</a></li><li class="sidebar-sub-header"><a href="/DHAP-Documentation/api/#status" class="sidebar-link">Status</a></li><li class="sidebar-sub-header"><a href="/DHAP-Documentation/api/#device" class="sidebar-link">Device</a></li></ul></li><li><a href="/DHAP-Documentation/api/ios.html" class="sidebar-link">iOS API</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Reference</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/DHAP-Documentation/reference/packet-types.html" class="sidebar-link">Packet Types</a></li><li><a href="/DHAP-Documentation/reference/elements.html" class="sidebar-link">Elements</a></li><li><a href="/DHAP-Documentation/reference/xml-schema.html" class="sidebar-link">XML Schema</a></li><li><a href="/DHAP-Documentation/reference/device-examples.html" class="sidebar-link">Device Examples</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="android-api"><a href="#android-api" aria-hidden="true" class="header-anchor">#</a> Android API</h1> <h2 id="dhap-instance"><a href="#dhap-instance" aria-hidden="true" class="header-anchor">#</a> DHAP Instance</h2> <p>The DHAP class contains the public API for the DHAP library. To start using the library, create an instance of the DHAP class. The DHAP class requires an Android context object, which can be the Activity that the instance is being created in or the application context.</p> <div class="language-java line-numbers-mode"><div class="highlight-lines"><br><br><div class="highlighted"> </div><br><br><br><br><br><br><div class="highlighted"> </div><br><br><br></div><pre class="language-java"><code><span class="token keyword">public</span> <span class="token keyword">class</span> <span class="token class-name">MainActivity</span> <span class="token keyword">extends</span> <span class="token class-name">AppCompatActivity</span> <span class="token punctuation">{</span>
    
    <span class="token keyword">private</span> <span class="token class-name">DHAP</span> dhap<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">onCreate</span><span class="token punctuation">(</span><span class="token class-name">Bundle</span> savedInstanceState<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">setContentView</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>layout<span class="token punctuation">.</span>activity_main<span class="token punctuation">)</span><span class="token punctuation">;</span>

        dhap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">DHAP</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br></div></div><h2 id="discovery"><a href="#discovery" aria-hidden="true" class="header-anchor">#</a> Discovery</h2> <h3 id="discover-devices"><a href="#discover-devices" aria-hidden="true" class="header-anchor">#</a> Discover Devices</h3> <p>To begin discovering compliant devices on the network, call the <code>discoverDevices</code> method on the DHAP instance. This method has several callbacks that make it easy to determine the outcome of the discovery.</p> <div class="language-java line-numbers-mode"><div class="highlight-lines"><br><br><div class="highlighted"> </div><br><br><br><br><br><br><br><br><div class="highlighted"> </div><br><br><br><br><div class="highlighted"> </div><br><br><br><br></div><pre class="language-java"><code>dhap<span class="token punctuation">.</span><span class="token function">discoverDevices</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">DiscoverDevicesCallbacks</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">foundDevices</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Device</span><span class="token punctuation">&gt;</span></span> devices<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Log</span><span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span>TAG<span class="token punctuation">,</span> <span class="token string">&quot;Devices found.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Device</span> device <span class="token operator">:</span> devices<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">Log</span><span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span>TAG<span class="token punctuation">,</span> <span class="token string">&quot;\tMAC: &quot;</span> <span class="token operator">+</span> device<span class="token punctuation">.</span><span class="token function">getMacAddress</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;, IP: &quot;</span> <span class="token operator">+</span> device<span class="token punctuation">.</span><span class="token function">getIpAddress</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">Log</span><span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span>TAG<span class="token punctuation">,</span> <span class="token string">&quot;\tName: &quot;</span> <span class="token operator">+</span> device<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;, Room: &quot;</span> <span class="token operator">+</span> device<span class="token punctuation">.</span><span class="token function">getRoom</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">noDevicesFound</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Log</span><span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span>TAG<span class="token punctuation">,</span> <span class="token string">&quot;No devices found.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">discoveryFailure</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Log</span><span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span>TAG<span class="token punctuation">,</span> <span class="token string">&quot;Discovery failed.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><p><strong>Line 3</strong> shows the <code>foundDevices(List&lt;Device&gt; devices)</code> callback. This callback indicates that the discovery process successfully found one or more compliant devices on the network. The callback also provides you with a list of <code>Device</code> objects that represent each device that was discovered. These Device objects have several properties that the real device would have including the devices MAC address, IP address, assigned name and location.</p> <p><strong>Line 12</strong> shows the <code>noDevicesFound()</code> callback. This callback indicates that the discovery process completed but was unable to find any compliant devices.</p> <p><strong>Line 17</strong> shows the <code>discoveryFailure()</code> callback. This callback indicates that something went wrong in the library during the process of attempting to find devices.</p> <p>In addition to the normal discovery operation, the DHAP library also allows for debug devices to be discovered using the <code>discoverDebugDevices(DiscoverDevicesCallbacks)</code> method. This method will search for xml files in the assets folder rather then over the network. A device object will be created for each xml file found.</p> <div class="language-java line-numbers-mode"><div class="highlight-lines"><div class="highlighted"> </div><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br><br></div><pre class="language-java"><code>dhap<span class="token punctuation">.</span><span class="token function">discoverDebugDevices</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">DiscoverDevicesCallbacks</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">foundDevices</span><span class="token punctuation">(</span><span class="token class-name">List</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Device</span><span class="token punctuation">&gt;</span></span> devices<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Log</span><span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span>TAG<span class="token punctuation">,</span> <span class="token string">&quot;Debug Devices found.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token keyword">for</span> <span class="token punctuation">(</span><span class="token class-name">Device</span> device <span class="token operator">:</span> devices<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">Log</span><span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span>TAG<span class="token punctuation">,</span> <span class="token string">&quot;\tMAC: &quot;</span> <span class="token operator">+</span> device<span class="token punctuation">.</span><span class="token function">getMacAddress</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;, IP: &quot;</span> <span class="token operator">+</span> device<span class="token punctuation">.</span><span class="token function">getIpAddress</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
            <span class="token class-name">Log</span><span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span>TAG<span class="token punctuation">,</span> <span class="token string">&quot;\tName: &quot;</span> <span class="token operator">+</span> device<span class="token punctuation">.</span><span class="token function">getName</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token operator">+</span> <span class="token string">&quot;, Room: &quot;</span> <span class="token operator">+</span> device<span class="token punctuation">.</span><span class="token function">getRoom</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">noDevicesFound</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Log</span><span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span>TAG<span class="token punctuation">,</span> <span class="token string">&quot;No devices found.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">discoveryFailure</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Log</span><span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span>TAG<span class="token punctuation">,</span> <span class="token string">&quot;Discovery failed.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br></div></div><h3 id="census-list"><a href="#census-list" aria-hidden="true" class="header-anchor">#</a> Census List</h3> <p>When discovery is performed, the list of devices, known as the census list, will be saved to local storage on the Android device. This list can be retrieved by calling the <code>getSavedDevices()</code> function. This function will return an <code>ArrayList</code> of <code>Device</code> objects representing each device that was saved to local storage.</p> <div class="language-java line-numbers-mode"><div class="highlight-lines"><br><br><br><br><br><br><br><br><br><br><br><div class="highlighted"> </div><br><br><br></div><pre class="language-java"><code>dhap<span class="token punctuation">.</span><span class="token function">discoverDebugDevices</span><span class="token punctuation">(</span><span class="token keyword">new</span> <span class="token class-name">DiscoverDevicesCallbacks</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">private</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Device</span><span class="token punctuation">&gt;</span></span> censusList<span class="token punctuation">;</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">onCreate</span><span class="token punctuation">(</span><span class="token class-name">Bundle</span> savedInstanceState<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onCreate</span><span class="token punctuation">(</span>savedInstanceState<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">setContentView</span><span class="token punctuation">(</span><span class="token class-name">R</span><span class="token punctuation">.</span>layout<span class="token punctuation">.</span>activity_main<span class="token punctuation">)</span><span class="token punctuation">;</span>

        dhap <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token function">DHAP</span><span class="token punctuation">(</span><span class="token keyword">this</span><span class="token punctuation">)</span><span class="token punctuation">;</span>

        censusList <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        censusList<span class="token punctuation">.</span><span class="token function">addAll</span><span class="token punctuation">(</span>dhap<span class="token punctuation">.</span><span class="token function">getSavedDevices</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br></div></div><p>The census list saved to local storage can also be cleared completely by calling the <code>clearSavedDevices()</code> function.</p> <div class="language-java line-numbers-mode"><div class="highlight-lines"><div class="highlighted"> </div><br></div><pre class="language-java"><code>dhap<span class="token punctuation">.</span><span class="token function">clearSavedDevices</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br></div></div><p>Or you can remove a specific device from the census list by calling  <code>removeDevice()</code>. This will remove any device from local storage with the same mac address. All other devices in local storage will remain.</p> <div class="language-java line-numbers-mode"><div class="highlight-lines"><br><br><br><div class="highlighted"> </div><br></div><pre class="language-java"><code><span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Device</span><span class="token punctuation">&gt;</span></span> censusList <span class="token operator">=</span> <span class="token keyword">new</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token punctuation">&gt;</span></span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
censusList<span class="token punctuation">.</span><span class="token function">addAll</span><span class="token punctuation">(</span>dhap<span class="token punctuation">.</span><span class="token function">getSavedDevices</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token class-name">Device</span> device <span class="token operator">=</span> censusList<span class="token punctuation">.</span><span class="token function">get</span><span class="token punctuation">(</span><span class="token number">0</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
dhap<span class="token punctuation">.</span><span class="token function">removeDevice</span><span class="token punctuation">(</span>device<span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br></div></div><h3 id="refresh-census-list"><a href="#refresh-census-list" aria-hidden="true" class="header-anchor">#</a> Refresh Census List</h3> <p>You can also refresh any list of devices by calling the <code>refreshCensusList(List&lt;Device&gt; devices, RefreshCensuslistCallbacks callbacks)</code> function. This function accepts any list of devices as a parameter and will individually check each devices status and header. This function is useful to check if devices are still active after a long period of time or to check if the devices received from local storage are still active. This function will also ensure the headers of each device are up to date. This function requires an instance of <code>RefreshCensuslistCallbacks</code> as a parameter. There is only one callback for this function that indicates the refreshing operation has concluded.</p> <div class="language-java line-numbers-mode"><div class="highlight-lines"><div class="highlighted"> </div><br><div class="highlighted"> </div><br><br><br><br><br><br></div><pre class="language-java"><code><span class="token keyword">private</span> <span class="token class-name">ArrayList</span><span class="token generics"><span class="token punctuation">&lt;</span><span class="token class-name">Device</span><span class="token punctuation">&gt;</span></span> censusList<span class="token punctuation">;</span>

dhap<span class="token punctuation">.</span><span class="token function">refreshCensusList</span><span class="token punctuation">(</span>censusList<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">RefreshCensuslistCallbacks</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">censusListRefreshed</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token comment">//The device objects in censusList ArrayList have now been updated.</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br></div></div><h2 id="joining"><a href="#joining" aria-hidden="true" class="header-anchor">#</a> Joining</h2> <h3 id="join-device"><a href="#join-device" aria-hidden="true" class="header-anchor">#</a> Join Device</h3> <p>The Joining API contains methods that allow for you to proceed with the joining protocol at your own pace or to complete the entire protocol in one method.</p> <p>The <code>joinDevice(String networkSSID, String networkPassword, String deviceSSID, String devicePassword, String name, String location, JoinDeviceCallbacks callback)</code> will perform all of the joining protocol for you. This will first verify the network SSID and password by connecting to that network. Then it will connect to the IoT devices AP and send the credentials and header information. This method will wait for a verification from the IoT device that it has successfully joined the network before calling the <code>success</code> callback.</p> <div class="language-java line-numbers-mode"><div class="highlight-lines"><br><br><div class="highlighted"> </div><br><br><br><br><div class="highlighted"> </div><br><br><br><br><div class="highlighted"> </div><br><br><br><br><div class="highlighted"> </div><br><br><br><br><br><div class="highlighted"> </div><br><br><br><br><br></div><pre class="language-java"><code>dhap<span class="token punctuation">.</span><span class="token function">joinDevice</span><span class="token punctuation">(</span>networkSSID<span class="token punctuation">,</span> networkPassword<span class="token punctuation">,</span> deviceSSID<span class="token punctuation">,</span> devicePassword<span class="token punctuation">,</span> deviceName<span class="token punctuation">,</span> deviceLocation<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">JoinDeviceCallbacks</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">networkNotFound</span><span class="token punctuation">(</span><span class="token class-name">String</span> SSID<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Log</span><span class="token punctuation">.</span><span class="token function">e</span><span class="token punctuation">(</span>TAG<span class="token punctuation">,</span> <span class="token string">&quot;Network not found: &quot;</span> <span class="token operator">+</span> SSID<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">credentialsAcknowledged</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Log</span><span class="token punctuation">.</span><span class="token function">e</span><span class="token punctuation">(</span>TAG<span class="token punctuation">,</span> <span class="token string">&quot;Credentials Acknowledged&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">sendCredentialsTimeout</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Log</span><span class="token punctuation">.</span><span class="token function">e</span><span class="token punctuation">(</span>TAG<span class="token punctuation">,</span> <span class="token string">&quot;Sending of credentials timed out&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">success</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        actionFragment<span class="token punctuation">.</span><span class="token function">setActionEnabled</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Log</span><span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span>TAG<span class="token punctuation">,</span> <span class="token string">&quot;successfully joined device&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">failure</span><span class="token punctuation">(</span><span class="token class-name">String</span> message<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        actionFragment<span class="token punctuation">.</span><span class="token function">setActionEnabled</span><span class="token punctuation">(</span><span class="token boolean">true</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token class-name">Log</span><span class="token punctuation">.</span><span class="token function">e</span><span class="token punctuation">(</span>TAG<span class="token punctuation">,</span> <span class="token string">&quot;failure: &quot;</span> <span class="token operator">+</span> message<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>               
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br><span class="line-number">22</span><br><span class="line-number">23</span><br><span class="line-number">24</span><br><span class="line-number">25</span><br><span class="line-number">26</span><br><span class="line-number">27</span><br><span class="line-number">28</span><br></div></div><p><strong>Line 3</strong> shows the <code>networkNotFound(String SSID)</code> callback This callback indicates that a network with the SSID could not be found.</p> <p><strong>Line 8</strong> shows the <code>credentialsAcknowledged()</code> callback. This callback indicates that the device has responded that the credentials have been received.</p> <p><strong>Line 13</strong> shows the <code>sendCredentialsTimeout()</code> callback. This callback indicates that an acknowledgement was not received from the device. This most likely due to the device not receiving the credentials.</p> <p><strong>Line 18</strong> shows the <code>success()</code> callback. This callback indicates that the device has successfully joined the network.</p> <p><strong>Line 24</strong> shows the <code>failure(String message)</code> callback. This callback indicates that something went wrong in the library during the process of attempting to joining the device or the device could not join the network.</p> <h3 id="connect-to-access-point"><a href="#connect-to-access-point" aria-hidden="true" class="header-anchor">#</a> Connect To Access Point</h3> <p>The <code>connectToAccessPoint(String SSID, String password, ConnectToApCallbacks callback)</code> method will connect to the designated AP and call the relevant callback methods. Note: this method will call the <code>success</code> callback once it has verified that a connection has been established and IP packets can now be sent. This has a 30 second timeout and will return <code>failure</code> if a connection is not established before the end of the timeout.</p> <div class="language-java line-numbers-mode"><div class="highlight-lines"><br><br><div class="highlighted"> </div><br><br><br><br><div class="highlighted"> </div><br><br><br><br><div class="highlighted"> </div><br><br><br><br></div><pre class="language-java"><code>dhap<span class="token punctuation">.</span><span class="token function">connectToAccessPoint</span><span class="token punctuation">(</span>SSID<span class="token punctuation">,</span> password<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">ConnectToApCallbacks</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">networkNotFound</span><span class="token punctuation">(</span><span class="token class-name">String</span> SSID<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Log</span><span class="token punctuation">.</span><span class="token function">e</span><span class="token punctuation">(</span>TAG<span class="token punctuation">,</span> <span class="token string">&quot;Network not found: &quot;</span> <span class="token operator">+</span> SSID<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">success</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Log</span><span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span>TAG<span class="token punctuation">,</span> <span class="token string">&quot;Successfully connected to AP&quot;</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">failure</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Log</span><span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span>TAG<span class="token punctuation">,</span> <span class="token string">&quot;Failed to connect to AP&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>                
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br></div></div><p><strong>Line 3</strong> shows the <code>networkNotFound()</code> callback This callback indicates that a network with that SSID could not be found.</p> <p><strong>Line 8</strong> shows the <code>success()</code> callback. This callback indicates that the access point was successfully connected to.</p> <p><strong>Line 13</strong> shows the <code>failure()</code> callback. This callback indicates that something went wrong in the library during the process of connecting to the access point.</p> <h3 id="send-credentials"><a href="#send-credentials" aria-hidden="true" class="header-anchor">#</a> Send Credentials</h3> <p>The <code>sendCredentials(String SSID, String password, String name, String location, SendCredentialsCallbacks callback)</code> method will broadcast the credentials and header information on its current network. This method should only be called after a connection to the IoT device has been established. Note: This method will only call the <code>success</code> callback once it has received an acknowledgement from the IoT device that credentials where received. This method will continuously broadcast the credentials once every second until an acknowledgement is received. If not acknowledgement is received within 20 seconds, <code>sendCredentialsTimeout</code> will be called and the credential broadcasts will cease.</p> <div class="language-java line-numbers-mode"><div class="highlight-lines"><br><br><div class="highlighted"> </div><br><br><br><br><div class="highlighted"> </div><br><br><br><br><div class="highlighted"> </div><br><br><br><br><div class="highlighted"> </div><br><br><br><br></div><pre class="language-java"><code>dhap<span class="token punctuation">.</span><span class="token function">sendCredentials</span><span class="token punctuation">(</span>SSID<span class="token punctuation">,</span> password<span class="token punctuation">,</span> name<span class="token punctuation">,</span> location<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">SendCredentialsCallbacks</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">credentialsAcknowledged</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Log</span><span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span>TAG<span class="token punctuation">,</span> <span class="token string">&quot;networkNotFound&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">sendCredentialsTimeout</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Log</span><span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span>TAG<span class="token punctuation">,</span> <span class="token string">&quot;successfully sent credentials&quot;</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">success</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Log</span><span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span>TAG<span class="token punctuation">,</span> <span class="token string">&quot;Successfully connected to AP&quot;</span> <span class="token punctuation">)</span><span class="token punctuation">;</span>
     <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">failure</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Log</span><span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span>TAG<span class="token punctuation">,</span> <span class="token string">&quot;Failed to connect to AP&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>              
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br><span class="line-number">18</span><br><span class="line-number">19</span><br><span class="line-number">20</span><br><span class="line-number">21</span><br></div></div><p><strong>Line 3</strong> shows the <code>credentialsAcknowledged()</code> callback. This callback indicates that the credentials where sent successfully and an acknowledgement has been received from the device.</p> <p><strong>Line 8</strong> shows the <code>sendCredentialsTimeout()</code> callback. This callback indicates that no response was received when sending the credentials.</p> <p><strong>Line 13</strong> shows the <code>success()</code> callback. This callback indicates that the device has successfully joined the network.</p> <p><strong>Line 18</strong> shows the <code>failure()</code> callback. This callback indicates that something went wrong in the library during the process of attempting to send credentials.</p> <h2 id="display"><a href="#display" aria-hidden="true" class="header-anchor">#</a> Display</h2> <h3 id="fetch-device-interface"><a href="#fetch-device-interface" aria-hidden="true" class="header-anchor">#</a> Fetch Device Interface</h3> <p>To retrieve the user interface of a device, call the <code>fetchDeviceInterface(Device device, FetchDeviceInterfaceCallbacks callbacks)</code> method. This method takes a <code>device</code> instance in as a parameter and will retrieve the UI of that particular device. This method will return an intent to an activity which displays the user interface of that device.</p> <div class="language-java line-numbers-mode"><div class="highlight-lines"><br><br><div class="highlighted"> </div><br><div class="highlighted"> </div><br><br><br><div class="highlighted"> </div><br><br><br><br><div class="highlighted"> </div><br><br><br><br></div><pre class="language-java"><code>dhap<span class="token punctuation">.</span><span class="token function">fetchDeviceInterface</span><span class="token punctuation">(</span>device<span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">FetchDeviceInterfaceCallbacks</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">deviceActivityIntent</span><span class="token punctuation">(</span><span class="token class-name">Intent</span> intent<span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Log</span><span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span>TAG<span class="token punctuation">,</span> <span class="token string">&quot;Fetched device interface.&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token function">startActivity</span><span class="token punctuation">(</span>intent<span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">invalidDisplayXmlFailure</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Log</span><span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span>TAG<span class="token punctuation">,</span> <span class="token string">&quot;invalidDisplayXmlFailure&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>

    <span class="token annotation punctuation">@Override</span>
    <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">displayTimeoutFailure</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token class-name">Log</span><span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span>TAG<span class="token punctuation">,</span> <span class="token string">&quot;displayTimeoutFailure&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br><span class="line-number">16</span><br><span class="line-number">17</span><br></div></div><p><strong>Line 3</strong> shows the <code>deviceActivityIntent()</code> callback.</p> <p><strong>Line 5</strong> shows the usage of the intent that has been returned. This activity is started by calling the <code>startActivity()</code> method.</p> <p><strong>Line 9</strong> shows the <code>invalidDisplayXmlFailure()</code> callback. This callback indicates that the xml send from the device is invalid.</p> <p><strong>Line 14</strong> shows the <code>displayTimeoutFailure()</code> callback. This callback indicates that the devices xml was not received before the timeout ended.</p> <h2 id="status"><a href="#status" aria-hidden="true" class="header-anchor">#</a> Status</h2> <p>To request a status lease and receive status updates, an instance of the <code>Device</code> class must be used. This class will handle all functions relating to status updates and will therefore update relevant elements when a new status update is received.</p> <p>This class contains several public methods in its API relating to status updates.</p> <p><code>requestStatusLease(float leaseLength, float updatePeriod, boolean responseRequired, StatusLeaseCallbacks callbacks)</code> is the main method that will be needed. This will request a status lease from the IoT device and begin listening for status updates. This function contains four parameters. <code>leaselength</code> is the requested duration of the lease in milliseconds. <code>updatePeriod</code> refers to how often the status updates should be broadcast by the IoT device. <code>responseRequired</code> indicates if the IoT device should respond with the lease length and update period that has been granted.</p> <p>Their is two callbacks for this function. <code>leaseResponse(float leaseLength, float updatePeriod)</code> will be called only when a response is received from the IoT device and will contain the lease length and update period that was granted. <code>shouldRenewStatusLease()</code> will be called when a lease expires, this function should return a boolean that determines if the lease will be requested again or not.</p> <p>One would typically call this function in the <code>onCreate()</code> or <code>onResume()</code> method of an activity .</p> <div class="language-java line-numbers-mode"><div class="highlight-lines"><br><br><br><div class="highlighted"> </div><br><br><br><br><br><br><br><br><br><br><br><br></div><pre class="language-java"><code><span class="token annotation punctuation">@Override</span>
<span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">onResume</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onResume</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    device<span class="token punctuation">.</span><span class="token function">requestStatusLease</span><span class="token punctuation">(</span><span class="token number">10000</span><span class="token punctuation">,</span> <span class="token number">1000</span><span class="token punctuation">,</span> <span class="token boolean">false</span><span class="token punctuation">,</span> <span class="token keyword">new</span> <span class="token class-name">StatusLeaseCallbacks</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token annotation punctuation">@Override</span>
        <span class="token keyword">public</span> <span class="token keyword">void</span> <span class="token function">leaseResponse</span><span class="token punctuation">(</span><span class="token keyword">float</span> leaseLength<span class="token punctuation">,</span> <span class="token keyword">float</span> updatePeriod<span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token class-name">Log</span><span class="token punctuation">.</span><span class="token function">d</span><span class="token punctuation">(</span><span class="token string">&quot;DeviceActivity&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;leaseResponse: &quot;</span> <span class="token operator">+</span> leaseLength <span class="token operator">+</span> <span class="token string">&quot; UpdatePeriod: &quot;</span> <span class="token operator">+</span> updatePeriod<span class="token punctuation">)</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>

        <span class="token annotation punctuation">@Override</span>
        <span class="token keyword">public</span> <span class="token keyword">boolean</span> <span class="token function">shouldRenewStatusLease</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
            <span class="token keyword">return</span> <span class="token boolean">true</span><span class="token punctuation">;</span>
        <span class="token punctuation">}</span>
    <span class="token punctuation">}</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br><span class="line-number">14</span><br><span class="line-number">15</span><br></div></div><p>Conversely, you can also call <code>leaveLease()</code> which will indicate to the IoT device that you are no longer interested in status updates.</p> <div class="language-java line-numbers-mode"><div class="highlight-lines"><br><br><br><div class="highlighted"> </div><br><br></div><pre class="language-java"><code><span class="token annotation punctuation">@Override</span>
<span class="token keyword">protected</span> <span class="token keyword">void</span> <span class="token function">onStop</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
    <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">onStop</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
    device<span class="token punctuation">.</span><span class="token function">leaveLease</span><span class="token punctuation">(</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div><h2 id="device"><a href="#device" aria-hidden="true" class="header-anchor">#</a> Device</h2> <p>The device class contains several other functions which can be used to control or change the state of an IoT device.</p> <p>The name and location of a device represent the device header. These values can be changed for a specific device through the use of the <code>Device</code> class.</p> <p>To change the name of a device use the <code>changeDeviceName(String name)</code> function</p> <div class="language-java line-numbers-mode"><div class="highlight-lines"><br><div class="highlighted"> </div><br></div><pre class="language-java"><code><span class="token class-name">Device</span> device<span class="token punctuation">;</span>
device<span class="token punctuation">.</span><span class="token function">changeDeviceName</span><span class="token punctuation">(</span><span class="token string">&quot;Name here&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>To change the location of a device use the <code>changeDeviceLocation(String location)</code> function</p> <div class="language-java line-numbers-mode"><div class="highlight-lines"><br><div class="highlighted"> </div><br></div><pre class="language-java"><code><span class="token class-name">Device</span> device<span class="token punctuation">;</span>
device<span class="token punctuation">.</span><span class="token function">changeDeviceLocation</span><span class="token punctuation">(</span><span class="token string">&quot;Location here&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div><p>To send an IoT command to a device, use the <code>sendIoTCommand(String tag, String data)</code> function. <code>tag</code> represents the tag of the UI element that was interacted with while <code>data</code> is the new state of the elements.</p> <div class="language-java line-numbers-mode"><div class="highlight-lines"><br><div class="highlighted"> </div><br></div><pre class="language-java"><code><span class="token class-name">Device</span> device<span class="token punctuation">;</span>
device<span class="token punctuation">.</span><span class="token function">sendIoTCommand</span><span class="token punctuation">(</span><span class="token string">&quot;1-1&quot;</span><span class="token punctuation">,</span> <span class="token string">&quot;3&quot;</span><span class="token punctuation">)</span><span class="token punctuation">;</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br></div></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/DHAP-Documentation/guide/esp8266.html" class="prev">
          ESP8266 Device
        </a></span> <span class="next"><a href="/DHAP-Documentation/api/ios.html">
          iOS API
        </a>
        →
      </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/DHAP-Documentation/assets/js/app.ee0d968a.js" defer></script><script src="/DHAP-Documentation/assets/js/2.c97535ac.js" defer></script><script src="/DHAP-Documentation/assets/js/10.b1db677c.js" defer></script>
  </body>
</html>
