<!DOCTYPE html>
<html lang="en-US">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width,initial-scale=1">
    <title>iOS API | DHAP</title>
    <meta name="description" content="Decentralised Home Automation Protocol Documentation">
    
    
    <link rel="preload" href="/DHAP-Documentation/assets/css/0.styles.5604310b.css" as="style"><link rel="preload" href="/DHAP-Documentation/assets/js/app.ee0d968a.js" as="script"><link rel="preload" href="/DHAP-Documentation/assets/js/2.c97535ac.js" as="script"><link rel="preload" href="/DHAP-Documentation/assets/js/9.cf65704a.js" as="script"><link rel="prefetch" href="/DHAP-Documentation/assets/js/10.b1db677c.js"><link rel="prefetch" href="/DHAP-Documentation/assets/js/11.3c9e5aad.js"><link rel="prefetch" href="/DHAP-Documentation/assets/js/12.834af0f2.js"><link rel="prefetch" href="/DHAP-Documentation/assets/js/13.54851ada.js"><link rel="prefetch" href="/DHAP-Documentation/assets/js/14.645edb52.js"><link rel="prefetch" href="/DHAP-Documentation/assets/js/15.e3f71b71.js"><link rel="prefetch" href="/DHAP-Documentation/assets/js/16.996da96d.js"><link rel="prefetch" href="/DHAP-Documentation/assets/js/17.6d0813f1.js"><link rel="prefetch" href="/DHAP-Documentation/assets/js/3.a35a8884.js"><link rel="prefetch" href="/DHAP-Documentation/assets/js/4.3d1a62e5.js"><link rel="prefetch" href="/DHAP-Documentation/assets/js/5.5d5e6d2b.js"><link rel="prefetch" href="/DHAP-Documentation/assets/js/6.5d05364a.js"><link rel="prefetch" href="/DHAP-Documentation/assets/js/7.fb09b9af.js"><link rel="prefetch" href="/DHAP-Documentation/assets/js/8.2fb19c78.js">
    <link rel="stylesheet" href="/DHAP-Documentation/assets/css/0.styles.5604310b.css">
  </head>
  <body>
    <div id="app" data-server-rendered="true"><div class="theme-container"><header class="navbar"><div class="sidebar-button"><svg xmlns="http://www.w3.org/2000/svg" aria-hidden="true" role="img" viewBox="0 0 448 512" class="icon"><path fill="currentColor" d="M436 124H12c-6.627 0-12-5.373-12-12V80c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12zm0 160H12c-6.627 0-12-5.373-12-12v-32c0-6.627 5.373-12 12-12h424c6.627 0 12 5.373 12 12v32c0 6.627-5.373 12-12 12z"></path></svg></div> <a href="/DHAP-Documentation/" class="home-link router-link-active"><!----> <span class="site-name">DHAP</span></a> <div class="links"><div class="search-box"><input aria-label="Search" autocomplete="off" spellcheck="false" value=""> <!----></div> <!----></div></header> <div class="sidebar-mask"></div> <aside class="sidebar"><!---->  <ul class="sidebar-links"><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Home</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/DHAP-Documentation/" class="sidebar-link">Introduction</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Guide</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/DHAP-Documentation/guide/" class="sidebar-link">Quick Library Installation</a></li><li><a href="/DHAP-Documentation/guide/android.html" class="sidebar-link">Android Library</a></li><li><a href="/DHAP-Documentation/guide/ios.html" class="sidebar-link">iOS Library</a></li><li><a href="/DHAP-Documentation/guide/desktop.html" class="sidebar-link">Desktop Application</a></li><li><a href="/DHAP-Documentation/guide/esp8266.html" class="sidebar-link">ESP8266 Device</a></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading open"><span>API</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/DHAP-Documentation/api/" class="sidebar-link">Android API</a></li><li><a href="/DHAP-Documentation/api/ios.html" class="active sidebar-link">iOS API</a><ul class="sidebar-sub-headers"><li class="sidebar-sub-header"><a href="/DHAP-Documentation/api/ios.html#dhap-instance" class="sidebar-link">DHAP Instance</a></li><li class="sidebar-sub-header"><a href="/DHAP-Documentation/api/ios.html#discovery" class="sidebar-link">Discovery</a></li></ul></li></ul></section></li><li><section class="sidebar-group depth-0"><p class="sidebar-heading"><span>Reference</span> <!----></p> <ul class="sidebar-links sidebar-group-items"><li><a href="/DHAP-Documentation/reference/packet-types.html" class="sidebar-link">Packet Types</a></li><li><a href="/DHAP-Documentation/reference/elements.html" class="sidebar-link">Elements</a></li><li><a href="/DHAP-Documentation/reference/xml-schema.html" class="sidebar-link">XML Schema</a></li><li><a href="/DHAP-Documentation/reference/device-examples.html" class="sidebar-link">Device Examples</a></li></ul></section></li></ul> </aside> <main class="page"> <div class="theme-default-content content__default"><h1 id="ios-api"><a href="#ios-api" aria-hidden="true" class="header-anchor">#</a> iOS API</h1> <h2 id="dhap-instance"><a href="#dhap-instance" aria-hidden="true" class="header-anchor">#</a> DHAP Instance</h2> <p>The DHAP class contains the public API for the DHAP library. To start using the library, create an instance of the DHAP class. The DHAP class does not require any parameters.</p> <div class="language-swift line-numbers-mode"><div class="highlight-lines"><br><br><br><br><br><div class="highlighted"> </div><br><br><br><br><div class="highlighted"> </div><br><br><br></div><pre class="language-swift"><code><span class="token keyword">import</span> <span class="token builtin">UIKit</span>
<span class="token keyword">import</span> <span class="token constant">DHAP</span>

<span class="token keyword">class</span> <span class="token class-name">ViewController</span><span class="token punctuation">:</span> <span class="token builtin">UIViewController</span> <span class="token punctuation">{</span>

    <span class="token keyword">private</span> <span class="token keyword">var</span> dhap<span class="token punctuation">:</span> <span class="token constant">DHAP</span><span class="token operator">?</span>

    <span class="token keyword">override</span> <span class="token keyword">func</span> <span class="token function">viewDidLoad</span><span class="token punctuation">(</span><span class="token punctuation">)</span> <span class="token punctuation">{</span>
        <span class="token keyword">super</span><span class="token punctuation">.</span><span class="token function">viewDidLoad</span><span class="token punctuation">(</span><span class="token punctuation">)</span>

        dhap <span class="token operator">=</span> <span class="token function">DHAP</span><span class="token punctuation">(</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><h2 id="discovery"><a href="#discovery" aria-hidden="true" class="header-anchor">#</a> Discovery</h2> <h3 id="discover-devices"><a href="#discover-devices" aria-hidden="true" class="header-anchor">#</a> Discover Devices</h3> <p>To being discovering compliant devices on the network, call the <code>discoverDevices(completion: (DevicesResult))</code> method on the DHAP instance. This method has a completion handler that provides a <code>DevicesResult</code> enum type upon completion that indicates the result of the discovery process.</p> <div class="language-swift line-numbers-mode"><div class="highlight-lines"><br><br><div class="highlighted"> </div><br><br><br><br><div class="highlighted"> </div><br><div class="highlighted"> </div><br><br><br><br></div><pre class="language-swift"><code>dhap<span class="token operator">?</span><span class="token punctuation">.</span><span class="token function">discoverDevices</span><span class="token punctuation">(</span>completion<span class="token punctuation">:</span> <span class="token punctuation">{</span> <span class="token punctuation">(</span>result<span class="token punctuation">)</span> <span class="token keyword">in</span>
    <span class="token keyword">switch</span> result <span class="token punctuation">{</span>
    <span class="token keyword">case</span> <span class="token punctuation">.</span><span class="token function">foundDevices</span><span class="token punctuation">(</span><span class="token keyword">let</span> devices<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;<span class="token interpolation"><span class="token delimiter variable">\(</span>devices<span class="token punctuation">.</span><span class="token builtin">count</span><span class="token delimiter variable">)</span></span> devices found.&quot;</span><span class="token punctuation">)</span>
        <span class="token keyword">for</span> device <span class="token keyword">in</span> devices <span class="token punctuation">{</span>
            <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;Device Name: <span class="token interpolation"><span class="token delimiter variable">\(</span>device<span class="token punctuation">.</span>name<span class="token operator">!</span><span class="token delimiter variable">)</span></span> - <span class="token interpolation"><span class="token delimiter variable">\(</span>device<span class="token punctuation">.</span>location<span class="token operator">!</span><span class="token delimiter variable">)</span></span>&quot;</span><span class="token punctuation">)</span>
        <span class="token punctuation">}</span>
    <span class="token keyword">case</span> <span class="token punctuation">.</span>noDevicesFound<span class="token punctuation">:</span>
        <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;No devices found.&quot;</span><span class="token punctuation">)</span>
    <span class="token keyword">case</span> <span class="token punctuation">.</span><span class="token function">failure</span><span class="token punctuation">(</span><span class="token keyword">let</span> error<span class="token punctuation">)</span><span class="token punctuation">:</span>
        <span class="token function">print</span><span class="token punctuation">(</span><span class="token string">&quot;Something went wrong: <span class="token interpolation"><span class="token delimiter variable">\(</span>error<span class="token punctuation">.</span>localizedDescription<span class="token delimiter variable">)</span></span>&quot;</span><span class="token punctuation">)</span>
    <span class="token punctuation">}</span>
<span class="token punctuation">}</span><span class="token punctuation">)</span>
</code></pre><div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br><span class="line-number">6</span><br><span class="line-number">7</span><br><span class="line-number">8</span><br><span class="line-number">9</span><br><span class="line-number">10</span><br><span class="line-number">11</span><br><span class="line-number">12</span><br><span class="line-number">13</span><br></div></div><p><strong>Line 3</strong> shows the <code>foundDevices([Device])</code> result. This type is defined by the <code>DevicesResult</code> enum shown in the code sniffet below. This result indicates that the discovery process successfully found one or more compliant devices on the network. The result also provides an array of <code>Device</code> structs that represent each device that was discovered. These Device structs have several properties that the real device would have including the devices MAC, IP Address, assigned name and location.</p> <p><strong>Line 8</strong> shows the <code>noDevicesFound</code> result. This result indicates that the discovery process completed but was unable to find any compliant devices on the network.</p> <p><strong>Line 10</strong> shows the <code>failure(Error)</code> result. This result indicates that something went wrong during the discovery process. The results provides the <code>Error</code> object that was caught.</p> <div class="language-swift line-numbers-mode"><pre class="language-swift"><code><span class="token keyword">public</span> <span class="token keyword">enum</span> <span class="token builtin">DevicesResult</span> <span class="token punctuation">{</span>
    <span class="token keyword">case</span> <span class="token function">foundDevices</span><span class="token punctuation">(</span><span class="token punctuation">[</span><span class="token builtin">Device</span><span class="token punctuation">]</span><span class="token punctuation">)</span>
    <span class="token keyword">case</span> noDevicesFound
    <span class="token keyword">case</span> <span class="token function">failure</span><span class="token punctuation">(</span><span class="token builtin">Error</span><span class="token punctuation">)</span>
<span class="token punctuation">}</span>
</code></pre> <div class="line-numbers-wrapper"><span class="line-number">1</span><br><span class="line-number">2</span><br><span class="line-number">3</span><br><span class="line-number">4</span><br><span class="line-number">5</span><br></div></div></div> <footer class="page-edit"><!----> <!----></footer> <div class="page-nav"><p class="inner"><span class="prev">
        ←
        <a href="/DHAP-Documentation/api/" class="prev router-link-active">
          Android API
        </a></span> <span class="next"><a href="/DHAP-Documentation/reference/packet-types.html">
          Packet Types
        </a>
        →
      </span></p></div> </main></div><div class="global-ui"></div></div>
    <script src="/DHAP-Documentation/assets/js/app.ee0d968a.js" defer></script><script src="/DHAP-Documentation/assets/js/2.c97535ac.js" defer></script><script src="/DHAP-Documentation/assets/js/9.cf65704a.js" defer></script>
  </body>
</html>
